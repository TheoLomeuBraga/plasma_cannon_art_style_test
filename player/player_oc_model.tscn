[gd_scene load_steps=11 format=3 uid="uid://cwr63aj5eu6of"]

[ext_resource type="PackedScene" uid="uid://nn8pa6r0gpcc" path="res://player/player_oc.glb" id="1_c2gt8"]
[ext_resource type="AnimationLibrary" uid="uid://bf54s6a4qpao4" path="res://player/animation_lib/template_psx_charter.glb" id="2_2uvth"]
[ext_resource type="Script" uid="uid://cblq3in5u3elu" path="res://player/player_oc_model.gd" id="2_u2reh"]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_2uvth"]
animation = &"template_psx_charter/jump"

[sub_resource type="AnimationNodeTransition" id="AnimationNodeTransition_u2reh"]
xfade_time = 0.1
input_0/name = "floor"
input_0/auto_advance = false
input_0/break_loop_at_end = false
input_0/reset = true
input_1/name = "air"
input_1/auto_advance = false
input_1/break_loop_at_end = false
input_1/reset = true

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_mtrva"]
animation = &"template_psx_charter/idle"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_8ssyp"]
animation = &"template_psx_charter/walk"
use_custom_timeline = true
timeline_length = 1.25
stretch_time_scale = true
start_offset = 0.0
loop_mode = 1

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_eoc1p"]
animation = &"template_psx_charter/run"
use_custom_timeline = true
timeline_length = 0.75
stretch_time_scale = true
start_offset = 0.0
loop_mode = 1

[sub_resource type="AnimationNodeBlendSpace1D" id="AnimationNodeBlendSpace1D_l7sbk"]
blend_point_0/node = SubResource("AnimationNodeAnimation_mtrva")
blend_point_0/pos = 0.0
blend_point_1/node = SubResource("AnimationNodeAnimation_8ssyp")
blend_point_1/pos = 1.0
blend_point_2/node = SubResource("AnimationNodeAnimation_eoc1p")
blend_point_2/pos = 2.0
min_space = 0.0
max_space = 2.0

[sub_resource type="AnimationNodeBlendTree" id="AnimationNodeBlendTree_tanhj"]
graph_offset = Vector2(-590.3862, 156.80334)
nodes/walk_speed/node = SubResource("AnimationNodeBlendSpace1D_l7sbk")
nodes/walk_speed/position = Vector2(-280, 160)
nodes/estate/node = SubResource("AnimationNodeTransition_u2reh")
nodes/estate/position = Vector2(60, 180)
nodes/Animation/node = SubResource("AnimationNodeAnimation_2uvth")
nodes/Animation/position = Vector2(-280, 380)
node_connections = [&"output", 0, &"estate", &"estate", 0, &"walk_speed", &"estate", 1, &"Animation"]

[node name="player_oc_model" instance=ExtResource("1_c2gt8")]
script = ExtResource("2_u2reh")

[node name="GeneralSkeleton" parent="metarig" index="0"]
bones/0/position = Vector3(0, 1.0092504, -0.055199984)
bones/0/rotation = Quaternion(0.0016824885, 0, 0, 0.9999986)
bones/4/rotation = Quaternion(-1.6763806e-08, 0, 0, 1)
bones/5/rotation = Quaternion(-1.4901161e-08, 0, 0, 1)
bones/6/rotation = Quaternion(-2.2351744e-08, 0, 0, 1)
bones/10/rotation = Quaternion(0.07406338, 0.74232775, -0.66480094, 0.038779825)
bones/11/rotation = Quaternion(-0.0678161, -0.7033619, -0.043463208, 0.70625347)
bones/12/rotation = Quaternion(2.3283059e-10, 0.70710677, 2.3283059e-10, 0.70710677)
bones/14/rotation = Quaternion(-0.074063756, 0.74232775, -0.664801, -0.03878031)
bones/15/rotation = Quaternion(-0.06781613, 0.7033619, 0.043463238, 0.70625347)
bones/16/rotation = Quaternion(-7.2177504e-09, -0.70710677, 7.2177504e-09, 0.70710677)
bones/21/rotation = Quaternion(2.0880119e-08, 0.0048408513, 0.9999883, 1.143145e-09)
bones/22/rotation = Quaternion(-1.8200463e-16, 0.99997437, -0.0071655572, 1.2031196e-15)
bones/23/rotation = Quaternion(-7.322891e-16, 0.70710677, -0.70710677, -2.829312e-16)
bones/26/rotation = Quaternion(2.2972403e-08, 0.0048408513, 0.9999883, -1.3879292e-09)
bones/27/rotation = Quaternion(-1.8200463e-16, 0.99997437, -0.0071655572, 1.2031196e-15)
bones/28/rotation = Quaternion(-1.522828e-15, 0.70710677, -0.70710677, -8.07185e-16)

[node name="hair" parent="metarig/GeneralSkeleton" index="0"]
transform = Transform3D(1, 1.8929393e-16, 5.3985063e-17, 5.3494392e-17, -0.5252781, 0.8509306, 1.8943306e-16, -0.85093045, -0.52527803, 0, 1.9400591, -0.0791131)

[node name="spine_006" parent="metarig/GeneralSkeleton" index="1"]
transform = Transform3D(1, 0, 0, 0, 0.9999941, -0.0033648626, 0, 0.003364863, 0.999994, 0, 1.780377, 0.027295196)

[node name="spine_004" parent="metarig/GeneralSkeleton" index="2"]
transform = Transform3D(1, 0, 0, 0, 0.99999434, -0.0033649383, 0, 0.0033649383, 0.99999434, 0, 1.6573992, -0.009218767)

[node name="hand_L" parent="metarig/GeneralSkeleton" index="3"]
transform = Transform3D(0.042534407, 0.14729938, -0.98817706, 0.0033904891, -0.9890877, -0.14728923, -0.99908936, 0.0029144615, -0.042569682, 0.2560628, 1.0395079, -0.0015342608)

[node name="forearm_L" parent="metarig/GeneralSkeleton" index="4"]
transform = Transform3D(-0.98817706, 0.14729938, -0.042534407, -0.14728923, -0.9890877, -0.0033904898, -0.042569682, 0.0029144608, 0.99908936, 0.23468125, 1.2984974, -0.04090151)

[node name="upper_arm_L" parent="metarig/GeneralSkeleton" index="5"]
transform = Transform3D(0.058396883, 0.10510862, -0.9927447, -0.15273067, -0.981794, -0.11293341, -0.98654103, 0.15821752, -0.041280385, 0.1953, 1.5838511, -0.02476634)

[node name="hand_R" parent="metarig/GeneralSkeleton" index="6"]
transform = Transform3D(0.042534288, -0.14729936, 0.98817706, -0.0033893776, -0.98908764, -0.14728911, 0.9990893, 0.0029155351, -0.042569414, -0.2560628, 1.0395079, -0.0015336312)

[node name="forearm_R" parent="metarig/GeneralSkeleton" index="7"]
transform = Transform3D(-0.98817706, -0.14729936, 0.04253429, 0.14728911, -0.98908764, -0.0033893574, 0.042569414, 0.0029155556, 0.9990893, -0.23468125, 1.2984974, -0.04090117)

[node name="upper_arm_R" parent="metarig/GeneralSkeleton" index="8"]
transform = Transform3D(0.05839677, -0.10510862, 0.9927447, 0.15273187, -0.98179376, -0.11293329, 0.9865408, 0.15821868, -0.041280158, -0.1953, 1.5838511, -0.02476634)

[node name="spine_003" parent="metarig/GeneralSkeleton" index="9"]
transform = Transform3D(1, 0, 0, 0, 0.99999434, -0.0033649718, 0, 0.0033649718, 0.99999434, 0, 1.4648819, -0.0043665455)

[node name="spine_001" parent="metarig/GeneralSkeleton" index="10"]
transform = Transform3D(1, 0, 0, 0, 0.99999434, -0.0033649718, 0, 0.0033649718, 0.99999434, 0, 1.1565218, -0.016704217)

[node name="foot_L" parent="metarig/GeneralSkeleton" index="11"]
transform = Transform3D(-0.99999976, 4.1736655e-08, 2.6825009e-09, 2.347921e-09, -0.008014389, 0.9999678, 4.1756813e-08, 0.9999679, 0.00801439, 0.09799999, 0.08504954, -0.016234402)

[node name="shin_L" parent="metarig/GeneralSkeleton" index="12"]
transform = Transform3D(0.99999976, -2.6825002e-09, -4.1736655e-08, -2.3479203e-09, -0.9999678, 0.008014389, -4.1756813e-08, -0.00801439, -0.9999679, 0.098, 0.53667575, 0.03218642)

[node name="thigh_L" parent="metarig/GeneralSkeleton" index="13"]
transform = Transform3D(-0.9999999, -2.0841078e-09, 4.177081e-08, 2.347921e-09, -0.99998, 0.0063167186, 4.1756813e-08, 0.0063167196, 0.9999801, 0.098, 1.0712061, -0.012191251)

[node name="foot_R" parent="metarig/GeneralSkeleton" index="14"]
transform = Transform3D(-0.99999976, 4.5969074e-08, -2.3397058e-09, -2.7080447e-09, -0.008014389, 0.9999678, 4.594884e-08, 0.9999679, 0.00801439, -0.09799999, 0.08504954, -0.016234402)

[node name="shin_R" parent="metarig/GeneralSkeleton" index="15"]
transform = Transform3D(0.99999976, 2.3397069e-09, -4.5969077e-08, 2.7080458e-09, -0.9999678, 0.008014389, -4.5948845e-08, -0.00801439, -0.9999679, -0.098, 0.53667575, 0.03218642)

[node name="thigh_R" parent="metarig/GeneralSkeleton" index="16"]
transform = Transform3D(-0.9999999, 2.9982374e-09, 4.5930825e-08, -2.7080456e-09, -0.99998, 0.0063167186, 4.594885e-08, 0.0063167196, 0.9999801, -0.098, 1.0712061, -0.012191251)

[node name="spine" parent="metarig/GeneralSkeleton" index="17"]
transform = Transform3D(1, 0, 0, 0, 0.99999434, -0.0033649718, 0, 0.0033649718, 0.99999434, 0, 1.0092504, -0.055199984)

[node name="SpringBoneSimulator3D" type="SpringBoneSimulator3D" parent="metarig/GeneralSkeleton" index="18"]
setting_count = 1
settings/0/root_bone_name = "hair"
settings/0/root_bone = 7
settings/0/end_bone_name = "hair.001"
settings/0/end_bone = 8
settings/0/extend_end_bone = false
settings/0/center_from = 0
settings/0/individual_config = false
settings/0/rotation_axis = 3
settings/0/radius/value = 0.02
settings/0/radius/damping_curve = null
settings/0/stiffness/value = 1.0
settings/0/stiffness/damping_curve = null
settings/0/drag/value = 0.4
settings/0/drag/damping_curve = null
settings/0/gravity/value = 0.0
settings/0/gravity/damping_curve = null
settings/0/gravity/direction = Vector3(0, -1, 0)
settings/0/enable_all_child_collisions = true
settings/0/exclude_collision_count = 0

[node name="AnimationPlayer" type="AnimationPlayer" parent="metarig" index="1"]
root_node = NodePath("../..")
libraries = {
&"template_psx_charter": ExtResource("2_2uvth")
}

[node name="AnimationTree" type="AnimationTree" parent="metarig" index="2"]
root_node = NodePath("../..")
tree_root = SubResource("AnimationNodeBlendTree_tanhj")
anim_player = NodePath("../AnimationPlayer")
parameters/walk_speed/blend_position = 0.0
parameters/estate/current_state = "floor"
parameters/estate/transition_request = ""
parameters/estate/current_index = 0
